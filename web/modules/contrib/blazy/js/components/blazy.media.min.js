!function(m,o,c){"use strict";var i=c,p="media",l="blazy-"+p,n="b-"+p,f=p+"--player",s="."+f,u=p+"__icon",h="."+u+"--play",v="iframe",$="is-playing",y="data-"+v+"-title",g="data-url";function e(a){var n,s,d,e=m(a),t=e.find(v),a=e.find(h),r=m(c);m.isElm(a)&&(n=m.attr(a,g),s=m.attr(a,y),m.remove(t),e.on("click."+l,h,function(a){if(a.preventDefault(),""===n)return!1;var e=this,t=e.parentNode,i=r.find("."+$),l=m.find(t,v),a=r.find("video");n=m.attr(e,g),s=m.attr(e,y),m.isElm(a)&&!a.paused&&a.pause(),m.isElm(i)&&(a=r.find("."+$+" "+v),m.remove(a),i.className=i.className.replace(/(\S+)playing/,"")),m.addClass(t,$),m.remove(l),d||((d=c.createElement(v)).className=p+"__iframe "+p+"__element",m(d).attr({src:n,allowfullscreen:!0,title:s})),t.appendChild(d)}),e.on("click."+l,".media__icon--close",function(a){a.preventDefault();var e=this.parentNode,a=m.find(e,v);e.className.match($)&&(e.className=e.className.replace(/(\S+)playing/,"")),m.remove(a)}))}o.theme.blazyMedia=function(a){var e=a.el||a.element,t=m(e),i=t.find("img"),l=m.parse(t.attr("data-"+p)),n=m.isElm(i)?o.checkPlain(m.attr(i,"alt","Video preview",!0)):"",s=l.width?parseInt(l.width,10):640,d=l.height?parseInt(l.height,10):360,r=l?(d/s*100).toFixed(2):100,c=t.attr("data-box-url"),e=t.attr("href"),i=t.attr("data-oembed-url",e,!0),d=p+"__image "+p+"__element",t=a.imgClass?d+" "+a.imgClass:d,e=l.id?" media--"+l.id:"",d="video"===l.type?" "+f:"",l="";return c&&(l+='<img src="$img" class="$imgClass" alt="$alt" loading="lazy" decoding="async" />'),d&&(l+='<span class="$icon $icon--close"></span>',l+='<span class="$icon $icon--play" data-url="$oembed" data-iframe-title="$alt"></span>'),l='<div class="$md $idClass $md--switch $player $md--ratio $md--ratio--fluid" style="padding-bottom: $pad%">'+l+"</div>",a.unwrap||(l='<div class="$wrapper $wrapper--inline" style="width: $widthpx">'+l+"</div>"),m.template(l,{md:p,icon:u,idClass:e,player:d,pad:r,img:c,imgClass:t,alt:n,oembed:i,width:s,wrapper:p+"-wrapper"})},o.behaviors.blazyMedia={attach:function(a){i=m.context(a),m.once(e,n,s,i)},detach:function(a,e,t){"unload"===t&&m.once.removeSafely(n,s,i)}}}(dBlazy,Drupal,this.document);
