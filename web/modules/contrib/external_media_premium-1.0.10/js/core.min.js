!function(e,t,n){"use strict";var i=[];t.behaviors.emwCore={extNotFound:2,popupHtml:function(t,n,i,o){var a=t.parent().parent(),l=Math.floor(65536*Math.random()).toString(16);t.addClass("popup-opened").addClass("window-id-"+l);var d=window.top.outerHeight/2+window.top.screenY-o/2,s=window.top.outerWidth/2+window.top.screenX-i/2,c=window.open(n,l,"directories=no,titlebar=no,toolbar=no,location=no,status=no,menubar=no,width="+i+",height="+o+",top="+d+",left="+s);c.onbeforeunload=function(t){var n=c.document.getElementById("files").innerHTML,i=n.split("|");void 0!==n&&""!=n&&null!=n&&(a.find(".external-media-widget-wrapper input[type=text]").val(i.join("|")),i.length&&(e("input.external-media-upload-button",a).mousedown(),e(".button",a).unbind().addClass("disabled")),a.ajaxComplete(function(t,n,i){e(".button",a).removeClass("disabled")})),e("a.window-id-"+c.name).removeClass("popup-opened").removeClass("window-id-"+c.name)}},selectedClass:function(e,t){var n="";return i.indexOf(e+"::::"+t)>-1&&(n=" selected"),n},matchSomeExt:function(e,t){return t.some(function(t){return e.indexOf(t)>=0})},loadResource:function(i,o,a,l){var d=e(".external-media-widget-popup .fetched-items"),s=n.path.baseUrl+"external-media/resource/"+i+"?_format=json",c=".prev-fetched-items",r=".next-fetched-items",u=e("#current_page"),f=1;if(1==f&&e(c).hide(),e(r).hide(),e(document).on("click",c,function(t){f-1<=1?(f=1,u.val(f),e(c).hide()):f--,u.val(f),e(o).submit()}),e(document).on("click",r,function(t){f++,e(c).show(),u.val(f),e(o).submit()}),e(document).ajaxStart(function(){e("#emw-loader").css("display","flex")}),e(document).ajaxStop(function(){e("#emw-loader").hide()}),null===o){d.html("");var p={};for(var h in a)v(a[h])?p[h]=a[h].is(":checked")?"true":"false":p[h]=e(a[h]).val();e.get(s,p,null,"json").fail(function(e,t,n){alert(t)}).done(function(e){if(e.length){var n=0,i=!1;e.forEach(function(e){var t=l(e);2==t?i=!0:(n++,d.append(t))}),i&&0==n&&m(t.t("Files do not match allowed file extensions."))}else m(t.t("No data loaded, please try again."))})}else e(document).on("submit",o,function(n){d.html("");var i={};for(var o in a)v(a[o])?i[o]=a[o].is(":checked")?"true":"false":i[o]=e(a[o]).val();e.get(s,i,null,"json").fail(function(e,t,n){alert(t)}).done(function(n){var i=0,o=!1;0==n.length?(e(c).hide(),e(r).hide()):n.length<30?e(r).hide():e(r).show(),n.length?(n.forEach(function(e){var t=l(e);2==t?o=!0:(i++,d.append(t))}),o&&0==i&&(m(t.t("Files do not match allowed file extensions.")),e(c).hide(),e(r).hide())):m(t.t("Please refine your search parameters and try again."))}),n.preventDefault()});function m(e){d.append('<div class="no-items-text"><span>'+e+"</span></div>")}function v(e){var t=typeof e;return"function"===t||"object"===t&&!!e}},isExtSafe:function(e){return-1==="php|phar|pl|py|cgi|asp|js".indexOf(e)},initViewer:function(n,o){var a=document.getElementById("files");if(a){var l=window.opener.document.getElementsByClassName("window-id-"+window.self.name),d=e(l).data("plugin"),s=e(l).data("max-filesize"),c=e(l).data("file-extentions"),r=e(l).data("description"),u=e(l).data("cardinality"),f=e(l).data("multiselect"),p=e("#deselect"),h=e("#cancel"),m=e("#pick"),v=e("span.pick-label"),w=e("#files-count"),g=u>0?u:100;g>1&&(f=!0),o(d,s,c,r,u,f),e(document).on("mouseover",".item-pick",function(t){e(this).find(".profile-info").show()}),e(document).on("mouseleave",".item-pick",function(t){e(this).find(".profile-info").hide()}),p.on("click",function(n){i=[],e(a).html(""),e(document).find(".item-pick").removeClass("selected"),v.html(t.t("Choose")),m.hide(),p.hide(),n.preventDefault()}),h.on("click",function(t){e(a).html(""),window.self.close(),t.preventDefault()}),e(document).on("click",".item-pick",function(o){var a=d+"::::"+e(this).data(n);if(!(i.length<g)){if(i.indexOf(a)>-1){e(this).toggleClass("selected");l=i.indexOf(a);i.splice(l,1)}}else if(e(this).toggleClass("selected"),i.indexOf(a)>-1){var l=i.indexOf(a);i.splice(l,1)}else i.push(a);w.html(i.length),i.length?(v.html(t.formatPlural(i.length,"Import 1 selected","Import @count selected")),m.show(),p.show()):(v.html(t.t("Choose")),m.hide(),p.hide())}),m.hide(),m.on("click",function(t){e(this).hasClass("disabled")||i.length&&(e(a).html(i.join("|")),window.self.close()),t.preventDefault()})}},removeFiles:function(){i=[]},addFile:function(e){if(i.indexOf(e)>-1){var t=i.indexOf(e);i.splice(t,1)}i.push(e)}}}(jQuery,Drupal,drupalSettings);